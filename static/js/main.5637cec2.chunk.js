(this.webpackJsonphexterrain=this.webpackJsonphexterrain||[]).push([[0],{78:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(31),c=n.n(o),s=n(22),i=n(99),l=n(100),u=(n(78),n(13));var d=n(72),h=n(36),f=n(61),j=n(71),b=n(73),p=n(62);function v(){var e=Object(r.useRef)(),t=Object(s.g)(),n=t.scene,a=t.gl,o=t.size,c=t.camera;return Object(r.useEffect)((function(){var t;null===e||void 0===e||null===(t=e.current)||void 0===t||t.setSize(o.width,o.height)}),[o]),Object(s.e)((function(){var t;return null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.render()}),2),Object(u.jsxs)("effectComposer",{ref:e,args:[a],children:[Object(u.jsx)("renderPass",{attachArray:"passes",scene:n,camera:c}),Object(u.jsx)("shaderPass",{attachArray:"passes",args:[p.a],"material-uniforms-resolution-value":[1/o.width,1/o.height],renderToScreen:!0}),Object(u.jsx)("sSAOPass",{attachArray:"passes",args:[n,c],kernelRadius:20,maxDistance:.3})]})}Object(s.d)({EffectComposer:d.a,ShaderPass:h.a,RenderPass:f.a,SSAOPass:j.a,UnrealBloomPass:b.a});var O=n(3),g=n(30),S=n(52),x=n.n(S),m=n(40),M=x()((function(e){return{colors:{Water:{value:.21,color:"#00a9ff"},Shore:{value:.01,color:"#ffd68f"},Beach:{value:.04,color:"#efb28f"},Shrub:{value:.1,color:"#9ea667"},Forest:{value:.29,color:"#586647"},Stone:{value:.36,color:"#656565"},Snow:{value:.6,color:"#9aa7ad"}},setColorValue:function(t,n){return e(Object(m.a)((function(e){e.colors[t].value=n})))},setColor:function(t,n){return e(Object(m.a)((function(e){e.colors[t].color=n})))},generation:{Seed:Math.random(),Height:1,Scale:.2,Detail:.5,Fuzzyness:.25},setGeneration:function(t,n){return e(Object(m.a)((function(e){e.generation[t]=n})))},general:{Trees:!1,Grass:!1,Clouds:!1},setGeneral:function(t,n){return e(Object(m.a)((function(e){e.general[t]=n})))}}}));var w=n(11),y=n(74);function F(e,t){var n=M((function(e){return e.generation})),a=Object(r.useMemo)((function(){return new y.a(Object(w.a)({seed:n.Seed,lacunarity:4*n.Detail,persistance:2*n.Fuzzyness},t))}),[t,n]);return function(e){return Math.pow(O.MathUtils.mapLinear(a.get2(new O.Vector2(e.x,e.y)),-1,1,0,1),2)}}var C=n(18),E=["size"];function P(e){var t=e.size,n=void 0===t?10:t,a=Object(C.a)(e,E),o=Object(r.useMemo)((function(){var e=new O.Shape;e.moveTo(0+n*Math.cos(0),0+n*Math.sin(0));for(var t=1;t<=6;t+=1)e.lineTo(0+n*Math.cos(2*t*Math.PI/6),0+n*Math.sin(2*t*Math.PI/6));return e}),[n]),c=Object(r.useMemo)((function(){return{steps:2,depth:10,bevelEnabled:!0,bevelThickness:.2,bevelSize:.5,bevelOffset:0,bevelSegments:8}}),[]);return Object(u.jsx)("extrudeGeometry",Object(w.a)({args:[o,c]},a))}var W=n(69),U=new O.Object3D;function _(e){var t=e.points,n=M((function(e){return e.colors})),a=M((function(e){return e.generation})),o=F(n.Water.value),c=Object(r.useRef)(),s=function(){var e=M((function(e){return e.colors}));return function(t){var n=t<=e.Water.value?new O.Color(e.Water.color):t<=e.Water.value+e.Shore.value?new O.Color(e.Shore.color):t<=e.Water.value+e.Beach.value?new O.Color(e.Beach.color):t<=e.Water.value+e.Shrub.value?new O.Color(e.Shrub.color):t<=e.Water.value+e.Forest.value?new O.Color(e.Forest.color):t<=e.Water.value+e.Stone.value?new O.Color(e.Stone.color):new O.Color(e.Snow.color),r=n.getHSL({h:0,s:1,l:1});return n.setHSL(r.h,1.7*r.s,r.l*(t<=e.Water.value?O.MathUtils.mapLinear(Math.pow(1-1.3*(e.Water.value-t),6),0,1,0,1.4):1)),n}}(n.Water.value),i=Object(r.useCallback)((function(e){if(c.current){var r=c.current;t.forEach((function(t,c){U.position.copy(t),U.scale.setScalar(.01),e&&U.scale.multiplyScalar(e),U.updateMatrix();var i=U.position.clone().multiplyScalar(a.Scale),l=o(i)*a.Height,u=s(l);l<=n.Water.value&&(l=n.Water.value),U.scale.z*=40*l,U.updateMatrix(),r.setMatrixAt(c,U.matrix),r.setColorAt(c,u)})),r.instanceMatrix.needsUpdate=!0,r.instanceColor.needsUpdate=!0}}),[t,o,s,n,a]),l=Object(W.useSpring)({scale:1,onChange:function(e){var t=e.value.scale;i(t)}}),d=l.scale;return Object(r.useEffect)((function(){d.start({from:0,to:1})}),[]),Object(r.useEffect)((function(){i()}),[i]),Object(u.jsx)("group",{children:Object(u.jsxs)("instancedMesh",{castShadow:!0,receiveShadow:!0,ref:c,args:[null,null,t.length],children:[Object(u.jsx)(P,{}),Object(u.jsx)("meshPhongMaterial",{shadowSide:O.FrontSide,side:O.FrontSide})]})})}function A(){var e=Object(r.useRef)();return Object(u.jsxs)("group",{children:[Object(u.jsx)("hemisphereLight",{args:["white","darkslategrey",.4]}),Object(u.jsx)("directionalLight",{ref:e,castShadow:!0,position:[-5,3,-5],intensity:2.5,shadowBias:-2e-4,color:"orange"}),Object(u.jsx)("directionalLight",{position:[1,1,1],intensity:.3})]})}var G=n(10),R=n(25),k=n(15),z=n.n(k),T=n(70);function V(){var e=M((function(e){return e.colors})),t=M((function(e){return e.generation})),n=M((function(e){return e.general})),a=M((function(e){return e.setColorValue})),o=M((function(e){return e.setGeneral})),c=M((function(e){return e.setColor})),s=M((function(e){return e.setGeneration})),i=function(){var e=Object(r.useState)(null),t=Object(G.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){Object(R.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,Object(T.a)();case 3:e.t1=e.sent.tier,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[]),n}(),l=Object(g.c)("General",(function(){var e={};return Object.keys(n).forEach((function(t){e[t]={value:n[t],onChange:function(e){return o(t,e)}}})),e}),[n,o]),d=Object(G.a)(l,2)[1];Object(g.c)("Color",(function(){var t={};return Object.keys(e).forEach((function(n){t[n]={value:e[n].value,min:0,max:1,onChange:function(e){return a(n,e)}},t[n+" Color"]={value:e[n].color,onChange:function(e){return c(n,e)}}})),t}),[e,a,c]);var h=Object(g.c)("Generation",(function(){var e={};return Object.keys(t).forEach((function(n){e[n]={value:t[n],min:0,max:1,onChange:function(e){return s(n,e)}}})),e}),[t,s]),f=Object(G.a)(h,2),j=(f[0],f[1]);return Object(g.c)({Regenerate:Object(g.b)((function(){return j({Seed:Math.random()})}))},[j]),Object(r.useEffect)((function(){console.log(i),i&&(i>1&&d({Trees:!0}),i>2&&d({Grass:!0}),i<1&&d({Trees:!1,Grass:!1}))}),[i]),Object(u.jsx)(g.a,{collapsed:!0})}var L=n(14),B=n(98);function D(){var e=M((function(e){return e.colors})),t=Object(r.useMemo)((function(){return{regular:["#557C55","#32502E","#8A8635"],snow:["#FEF5ED"]}}),[]);return function(n){if(n>=e.Water.value+e.Stone.value){var r=t.snow[Math.floor(Math.random()*t.snow.length)];return new O.Color(r)}var a=t.regular[Math.floor(Math.random()*t.regular.length)];return new O.Color(a)}}var I=new O.Object3D;function H(e){var t=e.points,n=Object(r.useRef)(),a=M((function(e){return e.colors})),o=M((function(e){return e.generation})),c=Object(B.a)("/models/trees.glb"),s=c.nodes,i=(c.materials,D()),l=F(a.Water.value),d=F(a.Water.value,{seed:200*o.Seed}),h=Object(r.useRef)([]),f=Object(r.useMemo)((function(){var e=Object(L.a)(t);return e.forEach((function(t,n){Math.random()<.6&&function(e,t){t>-1&&e.splice(t,1)}(e,n)})),e}),[t]);return Object(r.useEffect)((function(){h.current.forEach((function(e){f.forEach((function(t,n){I.position.copy(t.clone().multiplyScalar(100)),I.updateMatrix();var r=t.clone().multiplyScalar(o.Scale),c=l(r)*o.Height;I.position.z=400*c,I.position.x+=O.MathUtils.randFloat(-4,4),I.position.y+=O.MathUtils.randFloat(-4,4),I.rotation.x=Math.PI,c>a.Water.value+a.Shrub.value&&c<a.Water.value+a.Forest.value||c>a.Water.value+a.Stone.value?I.scale.setScalar(O.MathUtils.mapLinear(d(t),0,1,.02,.09)):I.scale.setScalar(0),I.updateMatrix(),e.setMatrixAt(n,I.matrix);var s=i(c);e.setColorAt(n,s)})),e.instanceMatrix.needsUpdate=!0,e.instanceColor.needsUpdate=!0}))}),[h,f,l,d,a,o]),Object(u.jsxs)("group",{ref:n,dispose:null,children:[Object(u.jsx)("instancedMesh",{ref:function(e){return e&&h.current.push(e)},castShadow:!0,receiveShadow:!0,geometry:s.SM_Env_Tree_Pine_01.geometry,rotation:[0,0,0],scale:[.01,.01,.01],args:[null,null,f.length],children:Object(u.jsx)("meshPhongMaterial",{shadowSide:O.FrontSide,side:O.FrontSide})}),Object(u.jsx)("instancedMesh",{ref:function(e){return e&&h.current.push(e)},castShadow:!0,receiveShadow:!0,geometry:s.SM_Env_Tree_Pine_02002.geometry,rotation:[0,0,0],scale:[.01,.01,.01],args:[null,null,f.length],children:Object(u.jsx)("meshPhongMaterial",{shadowSide:O.FrontSide,side:O.FrontSide})})]})}B.a.preload("/models/trees.glb");var N=new O.Object3D;function J(e){var t=e.points,n=Object(r.useRef)(),a=M((function(e){return e.colors})),o=M((function(e){return e.generation})),c=Object(B.a)("/models/grass.glb"),s=c.nodes,i=(c.materials,D()),l=F(a.Water.value),d=F(a.Water.value,{seed:200*o.Seed}),h=Object(r.useRef)([]),f=Object(r.useMemo)((function(){var e=Object(L.a)(t);return e.forEach((function(t,n){Math.random()<.6&&function(e,t){t>-1&&e.splice(t,1)}(e,n)})),e.push.apply(e,Object(L.a)(e).concat(Object(L.a)(e))),e}),[t]);return Object(r.useEffect)((function(){h.current.forEach((function(e){f.forEach((function(t,n){N.position.copy(t.clone().multiplyScalar(100)),N.updateMatrix();var r=t.clone().multiplyScalar(o.Scale),c=l(r)*o.Height;N.position.z=400*c,N.position.x+=O.MathUtils.randFloat(-5,5),N.position.y+=O.MathUtils.randFloat(-5,5),N.rotation.x=Math.PI,c>a.Water.value+a.Beach.value&&c<a.Water.value+a.Forest.value?N.scale.setScalar(O.MathUtils.mapLinear(d(t),0,1,.1,.1)):N.scale.setScalar(0),N.updateMatrix(),e.setMatrixAt(n,N.matrix);var s=i(c);e.setColorAt(n,s)})),e.instanceMatrix.needsUpdate=!0,e.instanceColor.needsUpdate=!0}))}),[h,f,l,d,a,o]),Object(u.jsx)("group",{ref:n,dispose:null,children:Object(u.jsx)("instancedMesh",{ref:function(e){return e&&h.current.push(e)},castShadow:!0,receiveShadow:!0,geometry:s.SM_Env_Grass_Patch_03.geometry,rotation:[0,0,0],scale:[.01,.01,.01],position:[0,0,.025],args:[null,null,f.length],children:Object(u.jsx)("meshPhongMaterial",{shadowSide:O.FrontSide,side:O.FrontSide})})})}B.a.preload("/models/grass.glb");var q=new O.Object3D;function K(){var e=Object(B.a)("/models/cloud.glb").nodes,t=Object(r.useRef)([]),n=Object(r.useMemo)((function(){return new Array(30).fill(0).map((function(){return{pos:new O.Vector3(O.MathUtils.randFloat(-8,8),O.MathUtils.randFloat(-8,8),O.MathUtils.randFloat(-1,1)).multiplyScalar(50),scale:O.MathUtils.randFloat(.1,.2),rate:O.MathUtils.randFloat(5,10)}}))}),[]);return Object(s.e)((function(e,r){t.current.forEach((function(e){n.forEach((function(t,n){q.position.copy(t.pos.clone()),t.pos.x+=r*t.rate,t.pos.x>400&&(t.pos.x=-400,t.pos.y=O.MathUtils.randFloat(-400,400));var a=Math.pow(1-Math.abs(t.pos.x/400),.5);q.scale.setScalar(t.scale).multiplyScalar(a),q.rotation.x=Math.PI,q.updateMatrix(),e.setMatrixAt(n,q.matrix)})),e.instanceMatrix.needsUpdate=!0}))})),Object(u.jsxs)("group",{dispose:null,position:[0,0,2.5],children:[Object(u.jsx)("instancedMesh",{ref:function(e){return e&&t.current.push(e)},castShadow:!0,receiveShadow:!0,geometry:e.SM_Generic_Cloud_01.geometry,rotation:[0,0,0],scale:[.01,.01,.01],args:[null,null,n.length],children:Object(u.jsx)("meshPhongMaterial",{shadowSide:O.FrontSide,side:O.FrontSide})}),Object(u.jsx)("instancedMesh",{ref:function(e){return e&&t.current.push(e)},castShadow:!0,receiveShadow:!0,geometry:e.SM_Generic_Cloud_02.geometry,rotation:[0,0,0],scale:[.01,.01,.01],args:[null,null,n.length],children:Object(u.jsx)("meshPhongMaterial",{shadowSide:O.FrontSide,side:O.FrontSide})}),Object(u.jsx)("instancedMesh",{ref:function(e){return e&&t.current.push(e)},castShadow:!0,receiveShadow:!0,geometry:e.SM_Generic_Cloud_03.geometry,rotation:[0,0,0],scale:[.01,.01,.01],args:[null,null,n.length],children:Object(u.jsx)("meshPhongMaterial",{shadowSide:O.FrontSide,side:O.FrontSide})})]})}B.a.preload("/models/cloud.glb");var Q=a.a.memo(K);function X(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(r.useMemo)((function(){var n=[];n.push(new O.Vector3);for(var r=.176*t,a=Math.PI/3,o=new O.Vector3(0,0,1),c=new O.Vector3(0,-r,0),s=new O.Vector3(0,r,0).applyAxisAngle(o,-a),i=new O.Vector3,l=0;l<6;l++)for(var u=1;u<=e;u++)for(var d=0;d<u;d++)i.copy(c).multiplyScalar(u).addScaledVector(s,d).applyAxisAngle(o,a*l),n.push((new O.Vector3).copy(i));return n}),[e,t])}(25),t=M((function(e){return e.general}));return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(V,{}),Object(u.jsxs)(s.a,{shadows:!0,gl:{antialias:!0,toneMappingExposure:.5,shadowMap:{enabled:!0,type:O.PCFSoftShadowMap},outputEncoding:O.sRGBEncoding},camera:{position:[5,6,5]},children:[Object(u.jsxs)(r.Suspense,{fallback:null,children:[Object(u.jsxs)("group",{"rotation-x":-Math.PI/2,children:[t.Trees&&Object(u.jsx)(H,{points:e}),t.Grass&&Object(u.jsx)(J,{points:e}),t.Clouds&&Object(u.jsx)(Q,{}),Object(u.jsx)(_,{points:e})]}),Object(u.jsx)(i.a,{preset:"sunset"}),Object(u.jsx)(l.a,{autoRotate:!0,autoRotateSpeed:.6,enablePan:!1}),Object(u.jsx)(v,{})]}),Object(u.jsx)(A,{})]}),Object(u.jsxs)("div",{className:"copy",children:["Work of "," ",Object(u.jsx)("a",{target:"_blank",href:"https://github.com/NFT2626",children:"NFT2626"})]})]})}var Y=document.getElementById("root");c.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(X,{})}),Y)}},[[97,1,2]]]);
//# sourceMappingURL=main.5637cec2.chunk.js.map